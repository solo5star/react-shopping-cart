import{c,d as h,e as u}from"./index-552c2b63.js";const d=[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,307,308];class p{constructor(t){this.responsePromise=t()}assertStatusCode(t,e){return(Array.isArray(e)?e:[e]).includes(t.statusCode)}async accept(t){const e=await this.responsePromise;return this.assertStatusCode(e,t)?e:null}async acceptOrThrow(t){const e=await this.responsePromise;if(!this.assertStatusCode(e,t))throw new Error(`Server responses with status code ${e.statusCode}`);return e}async acceptOkOrThrow(){return this.acceptOrThrow(d)}}class m{constructor(t,...e){this.internalQueryParams=null,this.path=t,this.internalParams=e}queryParams(t){return this.internalQueryParams=t,this}toString(){const t=[...this.internalParams],e=this.path.split("/").map(a=>a.startsWith(":")?t.shift():a).join("/"),s=Object.keys(this.internalQueryParams??{}).length===0?"":`?${new URLSearchParams(this.internalQueryParams??{}).toString()}`;return e+s}}class S{constructor(t){this.baseUrl=t}getUrl(t){return this.baseUrl?new URL(t,this.baseUrl):t}async parseResponseData(t){try{return await t.json()}catch{return null}}fetch(t,e,s){return new p(async()=>{const a=await fetch(this.getUrl(e.toString()),{method:t,...s});return{statusCode:a.status,data:await this.parseResponseData(a),headers:Object.fromEntries(a.headers.entries())}})}get(t){return this.fetch("GET",t)}post(t,e){return this.fetch("POST",t,{headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}patch(t,e){return this.fetch("PATCH",t,{headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}delete(t){return this.fetch("DELETE",t)}path(t,...e){return new m(t,...e)}}const o=new S,g=o.path.bind(o),f=r=>({setSelf:t,onSet:e})=>{const s=localStorage.getItem(r);s!==null&&t(JSON.parse(s)),e((a,y,l)=>{if(l){localStorage.removeItem(r);return}localStorage.setItem(r,JSON.stringify(a))})},n=c({key:"cartItemEntitiesState",default:o.get("/cart-items").acceptOrThrow(200).then(r=>r.data)}),i=c({key:"unselectedForOrdersState",default:[],effects:[f("unselectedForOrders")]}),P=h({key:"cartItemsState",get:({get:r})=>{const t=r(n),e=r(i);return t.map(s=>({...s,unselectedForOrder:e.includes(s.id)}))},set:({set:r,reset:t},e)=>{if(e instanceof u){t(n),t(i);return}r(n,e),r(i,e.filter(s=>s.unselectedForOrder).map(s=>s.id))}});export{o as a,P as c,g as p};
//# sourceMappingURL=cartItemsState-3b04e2a4.js.map
